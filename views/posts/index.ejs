<%- include('../partials/header') %>

<h2>Entries</h2>
<a href="/posts/new">New entry</a>

<div class="table-responsive" id="entry-container">
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Author</th>
        <th scope="col">Source</th>
        <th scope="col">Published</th>
        <th scope="col">Date Added</th>
        <th scope="col">Delete</th>
      </tr>
    </thead>
    <tbody>
      <% posts.forEach(function(p) {%> 
        <tr>
          <td class="align-middle">
            
              <a href=" /posts/<%= p.id %>"><%= p.title %></a>
          </td>
          <td class="align-middle"><%= p.author %></td>
          <td>
            
              <a href="<%= p.link ? p.link : '#' %>" class="align-middle">
                <%= p.source %>
              </a>
          </td>
          <td class="align-middle">
            
              <%= p.pubYear %>
          </td>
          <td class="align-middle">
            
              <%=
              p.createdAt ? p.createdAt.toLocaleDateString('en-US', date) : ''
              %>
          </td>
          <td>
            
              <form action="/posts/<%= p.id %>?_method=DELETE" method="POST">
                <button type="submit" class="btn btn-outline-dark btn-sm">
                  Delete
                </button>
              </form>
          </td>
        </tr>
      <% }); %>
    </tbody>
  </table>
</div>

<%- include('../partials/footer') %>